local keychecked = false
local hwid = nil
local hwidplr = nil

-- ดึง HWID ของผู้เล่นพร้อมจัดการข้อผิดพลาด
local success, err = pcall(function()
    hwidplr = game:GetService("RbxAnalyticsService"):GetClientId()
end)

if not success then
    warn("ไม่สามารถดึง HWID ของผู้เล่นได้: " .. err)
    return
elseif hwidplr == nil then
    warn("HWID ของผู้เล่นเป็น nil ไม่สามารถดำเนินการต่อได้!")
    return
end

-- กำหนด Key ชั่วคราวเพื่อทดสอบ (ลบหรือแก้ไขตามต้องการ)
_G.Key = "EDUHUB" -- หรือปล่อยให้ผู้ใช้กำหนดผ่าน GUI

-- ตรวจสอบ Key และกำหนด HWID
if _G.Key == "EDUHUB" then
    hwid = "53D920C0-924E-4B61-B243-AF47153FA2C2"
    keychecked = true
else
    warn("Key ไม่ถูกต้อง! Key ที่ป้อน: " .. (tostring(_G.Key) or "nil"))
end

-- ถ้า Key ผ่านการตรวจสอบ
if keychecked then
    if hwidplr == hwid then
        print("HWID ตรงกัน! กำลังรันสคริปต์... HWID: " .. hwidplr)
        
        -- รอให้เกมโหลดเสร็จ
        if not game:IsLoaded() then
            print("กำลังรอเกมโหลด...")
            game.Loaded:Wait()
        end
        
        -- ตรวจสอบว่า HttpGet มีอยู่และใช้งานได้
        if not game.HttpGet then
            warn("game:HttpGet ไม่สามารถใช้งานได้! กรุณาเปิดใช้งาน HTTP Requests หรือรันใน LocalScript")
            return
        end

        -- ทดสอบทั้งสอง URL
        local urls = {
            "https://raw.githubusercontent.com/EVILDARKSIDE111/Virus/refs/heads/main/a",
            "https://raw.githubusercontent.com/EVILDARKSIDE111/WW/refs/heads/main/%3A%3E"
        }
        
        for _, url in pairs(urls) do
            local scriptContent = nil
            local httpSuccess, httpErr = pcall(function()
                scriptContent = game:HttpGet(url)
            end)
            
            if httpSuccess and scriptContent and #scriptContent > 0 then
                print("ดึงสคริปต์จาก URL: " .. url .. " สำเร็จ! ความยาวของโค้ด: " .. #scriptContent .. " ตัวอักษร")
                -- รันสคริปต์พร้อมจัดการข้อผิดพลาด
                local scriptFunc, loadErr = loadstring(scriptContent)
                if scriptFunc then
                    local scriptSuccess, scriptErr = pcall(scriptFunc)
                    if scriptSuccess then
                        print("สคริปต์จาก URL: " .. url .. " รันสำเร็จ!")
                    else
                        warn("เกิดข้อผิดพลาดในการรันสคริปต์จาก URL: " .. url .. ": " .. scriptErr)
                    end
                else
                    warn("ไม่สามารถโหลดสคริปต์จาก URL: " .. url .. ": " .. loadErr)
                end
            else
                warn("ไม่สามารถดึงสคริปต์จาก URL: " .. url .. ": " .. (httpErr or "ไม่มีข้อมูล"))
            end
        end
    else
        warn("HWID ไม่ตรงกับที่กำหนด! HWID ผู้เล่น: " .. (hwidplr or "nil") .. " HWID กำหนด: " .. (hwid or "nil"))
    end
else
    warn("Key ไม่ผ่านการตรวจสอบ ไม่รันสคริปต์!")
end
